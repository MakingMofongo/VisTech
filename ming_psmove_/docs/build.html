
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Building PS Move API from source &#8212; PS Move API 4.0.12 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '4.0.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pairing the Controller to your PC" href="pairing.html" />
    <link rel="prev" title="PS Move API Documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pairing.html" title="Pairing the Controller to your PC"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PS Move API Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PS Move API 4.0.12 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="building-ps-move-api-from-source">
<h1>Building PS Move API from source<a class="headerlink" href="#building-ps-move-api-from-source" title="Permalink to this headline">¶</a></h1>
<p>Note that the <a class="reference external" href="https://github.com/thp/psmoveapi/releases">PS Move API Github Releases</a> page contains
prebuilt library downloads, you might prefer to use those.</p>
<div class="section" id="building-on-macos-10-14">
<h2>Building on macOS 10.14<a class="headerlink" href="#building-on-macos-10-14" title="Permalink to this headline">¶</a></h2>
<p>You need to install the following requirements:</p>
<ul class="simple">
<li><a class="reference external" href="http://brew.sh/">Homebrew</a></li>
</ul>
<p>Install the dependencies:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">x</span> <span class="n">scripts</span><span class="o">/</span><span class="n">install_dependencies</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>To build from source, you can use the build script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">x</span> <span class="n">scripts</span><span class="o">/</span><span class="n">macos</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">macos</span>
</pre></div>
</div>
</div>
<div class="section" id="building-on-ubuntu-18-04">
<h2>Building on Ubuntu 18.04<a class="headerlink" href="#building-on-ubuntu-18-04" title="Permalink to this headline">¶</a></h2>
<p>Install the dependencies:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">x</span> <span class="n">scripts</span><span class="o">/</span><span class="n">install_dependencies</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>To build from source, you can use the build script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">x</span> <span class="n">scripts</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">debian</span>
</pre></div>
</div>
</div>
<div class="section" id="building-on-windows-visual-studio">
<h2>Building on Windows (Visual Studio)<a class="headerlink" href="#building-on-windows-visual-studio" title="Permalink to this headline">¶</a></h2>
<p>You need to install the following requirements:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.visualstudio.com/en-us/downloads/">Visual Studio Community 2017</a> or newer</li>
<li><a class="reference external" href="http://www.cmake.org/cmake/resources/software.html">CMake</a> 3.9.1 or newer</li>
<li><a class="reference external" href="https://gitforwindows.org/">Git</a></li>
</ul>
<div class="section" id="automatic-build">
<h3>Automatic build<a class="headerlink" href="#automatic-build" title="Permalink to this headline">¶</a></h3>
<p>A build script is provided which will take care of the build for you. The
script will generate the Visual Studio solution and build everything in Debug
and Release.</p>
<p>Run the batch files in the “Developer Command Prompt for VS 2017” (you will
find it in the start menu folder “Visual Studio 2017”, for VS 2013/2015 the
menu items should be named similarly) from the PS Move API checkout folder.</p>
<p>For Visual Studio 2017 and 64-bit use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">call</span> <span class="n">scripts</span><span class="o">/</span><span class="n">visualc</span><span class="o">/</span><span class="n">build_msvc</span><span class="o">.</span><span class="n">bat</span> <span class="mi">2017</span> <span class="n">x64</span>
</pre></div>
</div>
<p>For Visual Studio 2017 and 32-bit use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">call</span> <span class="n">scripts</span><span class="o">/</span><span class="n">visualc</span><span class="o">/</span><span class="n">build_msvc</span><span class="o">.</span><span class="n">bat</span> <span class="mi">2017</span> <span class="n">x86</span>
</pre></div>
</div>
<p>The resulting binaries will be placed in <code class="docutils literal"><span class="pre">build-x86/</span></code> (for the 32-bit build)
and <code class="docutils literal"><span class="pre">build-x64/</span></code> (for the 64-bit build).</p>
</div>
</div>
<div class="section" id="cross-compiling-for-windows-mingw">
<h2>Cross-Compiling for Windows (MinGW)<a class="headerlink" href="#cross-compiling-for-windows-mingw" title="Permalink to this headline">¶</a></h2>
<p>To cross-compile for Windows on Ubuntu:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">mingw</span><span class="o">-</span><span class="n">w64</span> <span class="n">cmake</span>
</pre></div>
</div>
<p>To build manually without the tracker:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">build</span><span class="o">-</span><span class="n">win32</span>
<span class="n">cd</span> <span class="n">build</span><span class="o">-</span><span class="n">win32</span>
<span class="n">cmake</span> \
    <span class="o">-</span><span class="n">DCMAKE_TOOLCHAIN_FILE</span><span class="o">=../</span><span class="n">cmake</span><span class="o">/</span><span class="n">i686</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">mingw32</span><span class="o">.</span><span class="n">toolchain</span> \
    <span class="o">-</span><span class="n">DPSMOVE_BUILD_TRACKER</span><span class="o">=</span><span class="n">OFF</span> \
    <span class="o">..</span>

<span class="n">mkdir</span> <span class="n">build</span><span class="o">-</span><span class="n">win64</span>
<span class="n">cd</span> <span class="n">build</span><span class="o">-</span><span class="n">win64</span>
<span class="n">cmake</span> \
    <span class="o">-</span><span class="n">DCMAKE_TOOLCHAIN_FILE</span><span class="o">=../</span><span class="n">cmake</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">mingw32</span><span class="o">.</span><span class="n">toolchain</span> \
    <span class="o">-</span><span class="n">DPSMOVE_BUILD_TRACKER</span><span class="o">=</span><span class="n">OFF</span> \
    <span class="o">..</span>
</pre></div>
</div>
<p>Or use the ready-made build script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">-</span><span class="n">x</span> <span class="n">scripts</span><span class="o">/</span><span class="n">mingw64</span><span class="o">/</span><span class="n">cross</span><span class="o">-</span><span class="nb">compile</span> <span class="n">x86_64</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">mingw32</span>
<span class="n">bash</span> <span class="o">-</span><span class="n">x</span> <span class="n">scripts</span><span class="o">/</span><span class="n">mingw64</span><span class="o">/</span><span class="n">cross</span><span class="o">-</span><span class="nb">compile</span> <span class="n">i686</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">mingw32</span>
</pre></div>
</div>
</div>
<div class="section" id="building-for-the-pocket-c-h-i-p">
<h2>Building for the Pocket C.H.I.P<a class="headerlink" href="#building-for-the-pocket-c-h-i-p" title="Permalink to this headline">¶</a></h2>
<p>PS Move API now supports the Pocket C.H.I.P, an embedded Linux computer
running a Debian-based operating system. The device has built-in Bluetooth,
WIFI, a standard-sized USB port and a 3.5mm headphone jack, making it
suitable for portable PS Move applications.</p>
<p>To build on a Pocket C.H.I.P, <code class="docutils literal"><span class="pre">ssh</span></code> into your device (or use the Terminal)
and then build the release tarball:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">x</span> <span class="n">scripts</span><span class="o">/</span><span class="n">pocketchip</span><span class="o">/</span><span class="n">install_dependencies</span><span class="o">.</span><span class="n">sh</span>
<span class="n">bash</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">x</span> <span class="n">scripts</span><span class="o">/</span><span class="n">pocketchip</span><span class="o">/</span><span class="n">build</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<div class="section" id="installation-and-configuration">
<h3>Installation and Configuration<a class="headerlink" href="#installation-and-configuration" title="Permalink to this headline">¶</a></h3>
<p>In order to be able to use the PS Move Motion Controllers without <code class="docutils literal"><span class="pre">root</span></code>
access, you need to install an udev rules file on your C.H.I.P:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">cp</span> <span class="n">contrib</span><span class="o">/</span><span class="mi">99</span><span class="o">-</span><span class="n">psmove</span><span class="o">.</span><span class="n">rules</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">udev</span><span class="o">/</span><span class="n">rules</span><span class="o">.</span><span class="n">d</span><span class="o">/</span>
</pre></div>
</div>
<p>Also, not all kernels ship with the required <code class="docutils literal"><span class="pre">hidraw</span></code> support, you can
check if your kernel does by running the following command after bootup:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dmesg</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">hidraw</span>
</pre></div>
</div>
<p>A kernel with hidraw will print something like the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span>    <span class="mf">1.265000</span><span class="p">]</span> <span class="n">hidraw</span><span class="p">:</span> <span class="n">raw</span> <span class="n">HID</span> <span class="n">events</span> <span class="n">driver</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="n">Jiri</span> <span class="n">Kosina</span>
</pre></div>
</div>
<p>If your kernel does not have hidraw support, you should install the newest
Firmware for your Pocket C.H.I.P, and make sure to install all updates via <code class="docutils literal"><span class="pre">apt</span></code>.</p>
</div>
</div>
<div class="section" id="python-bindings">
<h2>Python bindings<a class="headerlink" href="#python-bindings" title="Permalink to this headline">¶</a></h2>
<p>Python bindings (among others) are built using SWIG. So make sure you have
that installed. CMake will let you know if SWIG could not be found in the
initial configure step. Look in CMake’s output in the section “Language
bindings”.</p>
<p>Also required is the Python library (<code class="docutils literal"><span class="pre">libpython-dev</span></code> on Linux). If you
have multiple versions of Python installed (most likely some 2.x and 3.x)
chances are CMake decides to use the wrong one. Again, look in CMake’s
output in the section “Language bindings” which version of the Python
library CMake is using for the build. Make sure it matches the version you
want to run your Python scripts with later. They must be the same!</p>
<p>If CMake does not choose the correct version right away, use the option
<code class="docutils literal"><span class="pre">PSMOVE_PYTHON_VERSION</span></code> to set the desired one. Usually it is sufficient
to set this to either 2 or 3 (for Python 2 and 3, respectively), but minor
versions are also supported. So you could choose between building for
Python 2.6 and 2.7. If you are running CMake from the command line set the
version like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">..</span> <span class="o">-</span><span class="n">DPSMOVE_PYTHON_VERSION</span><span class="o">=</span><span class="mi">2</span>
</pre></div>
</div>
<p>Check CMake’s output to verify that the correct version is now found; some
flavor of Python 2 in this example. If CMake still uses the wrong one, try
removing all the files CMake generated in the <code class="docutils literal"><span class="pre">build</span></code> directory and run
again.</p>
<div class="section" id="testing-the-build">
<h3>Testing the build<a class="headerlink" href="#testing-the-build" title="Permalink to this headline">¶</a></h3>
<p>A lot of Python example scripts are provided in the <code class="docutils literal"><span class="pre">examples/python/</span></code>
directory. They are laid out so that when you build the library (and its
Python bindings) in the customary <code class="docutils literal"><span class="pre">build</span></code> folder in the PSMove API
checkout, the Python examples should find the modules without needing to
install anything. We suggest you start with <code class="docutils literal"><span class="pre">always.py</span></code> which you can
directly call from within the <code class="docutils literal"><span class="pre">build</span></code> directory like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">../</span><span class="n">examples</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">always</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>This script does not require Bluetooth and should thus provide an easy
way to test the Python bindings. Simply connect your Move controller via
USB and run the script as shown above. If that is working, continue with
<code class="docutils literal"><span class="pre">pair.py</span></code> to set everything up for using Bluetooth.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building from Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-on-macos-10-14">Building on macOS 10.14</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-on-ubuntu-18-04">Building on Ubuntu 18.04</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-on-windows-visual-studio">Building on Windows (Visual Studio)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cross-compiling-for-windows-mingw">Cross-Compiling for Windows (MinGW)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-for-the-pocket-c-h-i-p">Building for the Pocket C.H.I.P</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-bindings">Python bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pairing.html">Pairing</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera.html">Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="moved.html">Network (Move Daemon)</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="navcon.html">Navigation Controller</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">PS Move API Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pairing.html"
                        title="next chapter">Pairing the Controller to your PC</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pairing.html" title="Pairing the Controller to your PC"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PS Move API Documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PS Move API 4.0.12 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Thomas Perl.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>